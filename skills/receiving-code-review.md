# 接收 Code Review 技能（Receiving Code Review）

> **技能 ID**: `receiving-code-review`
> **版本**: 1.0.0
> **用途**: 接收並處理 review 反饋、驗證優先、技術正確性
> **參考**: [obra/superpowers](https://github.com/obra/superpowers)

---

## 觸發條件

當以下情況發生時，應激活此技能：

- 收到 Code Review 反饋
- 需要處理 PR 評論
- 外部 reviewer 提出修改建議
- 需要評估反饋的技術正確性

---

## 一、核心原則

```
╔════════════════════════════════════════════════════════════╗
║    先驗證，再實現。先提問，再假設。技術正確優先於社交舒適  ║
║  Verify before implementing. Ask before assuming.          ║
║  Technical correctness over social comfort.                ║
╚════════════════════════════════════════════════════════════╝
```

---

## 二、禁止的表演性回應

```markdown
🚫 禁止使用這些表演性短語：

❌ "你說得太對了！"
❌ "這個建議太棒了！"
❌ "感謝精彩的反饋！"
❌ "我完全同意！"（在未驗證前）

這些違反了真實技術參與的原則。
```

**正確的回應方式**：

```markdown
✅ "我理解你的建議是...，讓我驗證一下。"
✅ "這個修改涉及...，我需要檢查..."
✅ "驗證完成，你的建議是正確的，現在實現。"
✅ "經過驗證，這個修改可能會影響...，我們需要討論。"
```

---

## 三、回應工作流程

### 3.1 五步流程

```
┌─────────────────────────────────────────────────────────────┐
│                    接收反饋流程                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Step 1: 完整閱讀                                           │
│          └─ 讀完所有反饋再行動                              │
│                    ↓                                        │
│  Step 2: 重述需求                                           │
│          └─ 確認理解正確                                    │
│                    ↓                                        │
│  Step 3: 驗證代碼庫                                         │
│          └─ 檢查實際情況                                    │
│                    ↓                                        │
│  Step 4: 評估技術正確性                                     │
│          └─ 判斷建議是否適用                                │
│                    ↓                                        │
│  Step 5: 技術回應或合理反駁                                 │
│          └─ 實現或提出異議                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 步驟詳解

#### Step 1: 完整閱讀

```markdown
在採取任何行動之前：

1. 讀完所有反饋項目
2. 識別項目之間的關聯
3. 標記不清楚的部分

⚠️ 警告：部分項目可能相互關聯
   部分理解 = 錯誤實現
```

#### Step 2: 重述需求

```markdown
## 我的理解

收到 [N] 項反饋：

1. **[反饋 1 標題]**
   - 你的建議: [重述]
   - 涉及文件: [列出]

2. **[反饋 2 標題]**
   - 你的建議: [重述]
   - 涉及文件: [列出]

請確認我的理解是否正確？
```

#### Step 3: 驗證代碼庫

```markdown
## 驗證結果

### 反饋 1: [標題]

**當前代碼狀態**:
\`\`\`typescript
// 實際代碼
[相關代碼片段]
\`\`\`

**建議的修改可行性**:
- ✅ 技術上可行
- ⚠️ 需要考慮: [相關因素]
```

#### Step 4: 評估技術正確性

```markdown
## 技術評估

### 反饋 1: [標題]

| 評估項目 | 結果 |
|---------|------|
| 技術正確性 | ✅/⚠️/❌ |
| 功能影響 | [描述] |
| 兼容性 | ✅/⚠️/❌ |
| 與架構一致 | ✅/⚠️/❌ |

**結論**: [接受/需要討論/建議反駁]
```

#### Step 5: 技術回應

**接受建議**：
```markdown
## 回應

### 反饋 1: ✅ 接受

驗證確認你的建議正確。現在實現：

\`\`\`typescript
// 修改後的代碼
[實現代碼]
\`\`\`

驗證：
\`\`\`bash
npm test
# 輸出: ✅ All tests passed
\`\`\`
```

**合理反駁**：
```markdown
## 回應

### 反饋 1: 💬 需要討論

經過驗證，這個修改可能會：

1. **功能影響**
   [具體影響說明]

2. **原始設計理由**
   [為什麼當初這樣設計]

3. **建議替代方案**
   [如果有的話]

你怎麼看？
```

---

## 四、處理模糊反饋

### 4.1 何時請求澄清

```markdown
遇到以下情況，立即請求澄清：

1. **範圍不清楚**
   "改進這個邏輯" → 具體改進什麼？

2. **多種解釋**
   "優化性能" → 時間還是空間？

3. **缺少上下文**
   "像其他地方一樣做" → 具體哪裡？

4. **衝突的建議**
   項目 A 和項目 B 似乎矛盾
```

### 4.2 澄清請求模板

```markdown
## 需要澄清

### 反饋 [N]: [標題]

我不確定這個建議的具體範圍：

**你的原始建議**:
> [引用原文]

**我的困惑**:
[具體說明不清楚的部分]

**可能的解釋**:
A. [解釋 A]
B. [解釋 B]

請確認你的意思是哪個？
```

---

## 五、來源特定策略

### 5.1 內部反饋（團隊成員/用戶）

```markdown
## 處理策略

1. **理解後實現**
   - 確認理解正確
   - 不需要過度懷疑

2. **仍然可以提問**
   - 範圍不清楚時
   - 需要確認優先級時

3. **尊重最終決定**
   - 提出意見後
   - 接受對方決策
```

### 5.2 外部反饋（外部 Reviewer）

```markdown
## 處理策略

應用懷疑+驗證策略：

1. **技術正確性**
   建議在我們的代碼庫中正確嗎？

2. **功能影響**
   會破壞現有功能嗎？

3. **設計理由**
   原始實現有特定理由嗎？

4. **平台兼容性**
   在我們的技術棧中適用嗎？

5. **完整上下文**
   Reviewer 了解完整情況嗎？
```

---

## 六、合理反駁

### 6.1 何時應該反駁

```markdown
✅ 應該反駁的情況：

1. **建議會破壞功能**
   有測試或證據支持

2. **Reviewer 缺少上下文**
   不了解特定設計決策

3. **違反 YAGNI 原則**
   添加不必要的複雜性

4. **與架構決策衝突**
   違反既定的架構模式

5. **技術上不正確**
   在我們的技術棧中不適用
```

### 6.2 反駁模板

```markdown
## 反駁：[反饋標題]

### 你的建議
> [引用原始建議]

### 我的分析

這個修改可能會造成問題：

**1. [問題類別]**
\`\`\`typescript
// 當前工作的代碼
[代碼片段]
\`\`\`

如果按建議修改：
\`\`\`typescript
// 修改後會導致
[問題代碼]
\`\`\`

**2. 原始設計理由**
[解釋為什麼這樣設計]

### 建議

A. 保持現狀（因為...）
B. 替代方案：[描述]

你怎麼看？
```

### 6.3 反駁原則

```markdown
✅ 正確的反駁方式：

1. **使用技術論據**
   不是防禦性的情緒

2. **引用工作的代碼**
   展示當前實現的正確性

3. **提供測試證據**
   "這些測試驗證了當前行為"

4. **上報架構衝突**
   "這與我們的架構決策衝突，需要討論"
```

---

## 七、修正錯誤的反駁

如果你的反駁被證明是錯誤的：

```markdown
## 修正

經過 [進一步驗證/討論]，你的建議是正確的。

**我之前的理解有誤**：
[簡短說明]

**現在實現**：
\`\`\`typescript
[修改後的代碼]
\`\`\`

驗證：
\`\`\`bash
npm test
# 輸出: ✅ All tests passed
\`\`\`
```

**注意**：
- ✅ 簡潔承認錯誤
- ❌ 避免冗長道歉
- ❌ 避免過度解釋

---

## 八、與其他技能的配合

```markdown
requesting-code-review → [提交 Review] → receiving-code-review
        ↓                                        ↓
    請求 Review                              處理反饋
        ↓                                        ↓
    自我預審                               驗證後實現
                                                 ↓
                                          git-workflow
                                                 ↓
                                            完成分支
```

---

## 九、禁止行為

```markdown
❌ 絕對禁止：

1. 未驗證就接受所有建議
2. 使用表演性讚美
3. 部分理解就開始實現
4. 防禦性拒絕反饋
5. 忽略反饋項目之間的關聯
6. 不提供技術理由就反駁
7. 過度道歉或解釋
8. 對內部反饋過度懷疑
```

---

## 十、自檢清單

### 收到反饋後

```markdown
□ 完整閱讀所有反饋
□ 識別項目關聯
□ 標記不清楚的部分
□ 請求必要的澄清
```

### 回應前

```markdown
□ 重述理解並確認
□ 驗證代碼庫現狀
□ 評估技術正確性
□ 準備技術論據（如需反駁）
```

### 實現後

```markdown
□ 所有接受的建議已實現
□ 測試驗證通過
□ 反駁項目已討論
□ 更新已推送
```

---

## 參考資源

- [obra/superpowers - receiving-code-review](https://github.com/obra/superpowers)
- **相關技能**:
  - `requesting-code-review` - 請求 Code Review
  - `verification-before-completion` - 驗證優先原則
  - `git-workflow` - 完成分支

---

**版本**: 1.0.0
**最後更新**: 2025-12-26
